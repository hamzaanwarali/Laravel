function ready(t){"loading"!==document.readyState?t():document.addEventListener("DOMContentLoaded",t)}const Utils={addClass:function(t,e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass:function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")},toggleClass:function(t,e){if(t.classList)t.classList.toggle(e);else{var n=t.className.split(" "),o=n.indexOf(e);o>=0?n.splice(o,1):n.push(e),t.className=n.join(" ")}},hasClass:function(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)},animateNumber:function(t,e,n,o){var i=null,a=e,r=n;requestAnimationFrame(function e(n){null===i&&(i=n);var s=n-i,c=Math.min(s/o,1),l=Math.floor(a+(r-a)*c);t.textContent=l.toLocaleString("ar-SA"),c<1&&requestAnimationFrame(e)})},debounce:function(t,e,n){var o;return function(){var i=this,a=arguments,r=n&&!o;clearTimeout(o),o=setTimeout(function(){o=null,n||t.apply(i,a)},e),r&&t.apply(i,a)}}},MobileNav={init:function(){const t=document.querySelector(".navbar-toggle"),e=document.querySelector(".navbar-nav");t&&e&&(t.addEventListener("click",function(){Utils.toggleClass(e,"show")}),document.addEventListener("click",function(n){t.contains(n.target)||e.contains(n.target)||Utils.removeClass(e,"show")}))}},PointsCounter={init:function(){document.querySelectorAll(".points-counter").forEach(function(t){const e=parseInt(t.getAttribute("data-target"))||0,n=parseInt(t.getAttribute("data-duration"))||1e3,o=new IntersectionObserver(function(i){i.forEach(function(i){i.isIntersecting&&(Utils.addClass(t,"animate"),Utils.animateNumber(t,0,e,n),o.unobserve(t))})});o.observe(t)})},updateCounter:function(t,e,n=!0){const o=parseInt(t.textContent.replace(/[^\d]/g,""))||0;n?(Utils.addClass(t,"animate"),Utils.animateNumber(t,o,e,800)):t.textContent=e.toLocaleString("ar-SA")}},SortableTable={init:function(){document.querySelectorAll(".table").forEach(function(t){t.querySelectorAll("th.sortable").forEach(function(e,n){e.addEventListener("click",function(){SortableTable.sortTable(t,n,e)})})})},sortTable:function(t,e,n){const o=t.querySelector("tbody"),i=Array.from(o.querySelectorAll("tr")),a=!Utils.hasClass(n,"asc");t.querySelectorAll("th.sortable").forEach(function(t){Utils.removeClass(t,"asc"),Utils.removeClass(t,"desc")}),Utils.addClass(n,a?"asc":"desc"),i.sort(function(t,n){const o=t.cells[e].textContent.trim(),i=n.cells[e].textContent.trim(),r=parseFloat(o.replace(/[^\d.-]/g,"")),s=parseFloat(i.replace(/[^\d.-]/g,""));return isNaN(r)||isNaN(s)?a?o.localeCompare(i,"ar"):i.localeCompare(o,"ar"):a?r-s:s-r}),i.forEach(function(t){o.appendChild(t)})}},ProgressBar={init:function(){document.querySelectorAll(".progress-bar").forEach(function(t){const e=t.getAttribute("data-width")||"0%",n=new IntersectionObserver(function(o){o.forEach(function(o){o.isIntersecting&&(setTimeout(function(){t.style.width=e},200),n.unobserve(t))})});n.observe(t)})},updateProgress:function(t,e){t.style.width=e+"%",t.setAttribute("data-width",e+"%")}},TaskManager={init:function(){document.querySelectorAll(".task-checkbox").forEach(function(t){t.addEventListener("change",function(){TaskManager.handleTaskCompletion(this)})})},handleTaskCompletion:function(t){const e=t.closest("tr")||t.closest(".task-item");if(t.checked){Utils.addClass(e,"completed"),Utils.addClass(e,"shake"),setTimeout(function(){Utils.removeClass(e,"shake")},500);const n=document.querySelector(".points-counter");if(n){const e=parseInt(n.textContent.replace(/[^\d]/g,""))||0,o=parseInt(t.getAttribute("data-points"))||10;PointsCounter.updateCounter(n,e+o)}}else Utils.removeClass(e,"completed")}},FormValidator={init:function(){document.querySelectorAll("form[data-validate]").forEach(function(t){t.addEventListener("submit",function(e){FormValidator.validateForm(t)||e.preventDefault()});t.querySelectorAll("input, textarea, select").forEach(function(t){t.addEventListener("blur",function(){FormValidator.validateField(t)})})})},validateForm:function(t){const e=t.querySelectorAll("input[required], textarea[required], select[required]");let n=!0;return e.forEach(function(t){FormValidator.validateField(t)||(n=!1)}),n},validateField:function(t){const e=t.value.trim(),n=t.type;let o=!0,i="";if(FormValidator.removeError(t),t.hasAttribute("required")&&!e&&(o=!1,i="هذا الحقل مطلوب"),"email"===n&&e){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(o=!1,i="يرجى إدخال بريد إلكتروني صحيح")}return"password"===n&&e&&e.length<6&&(o=!1,i="كلمة المرور يجب أن تكون 6 أحرف على الأقل"),o||FormValidator.showError(t,i),o},showError:function(t,e){Utils.addClass(t,"error");const n=document.createElement("div");n.className="error-message",n.textContent=e,t.parentNode.appendChild(n)},removeError:function(t){Utils.removeClass(t,"error");const e=t.parentNode.querySelector(".error-message");e&&e.remove()}},SmoothScroll={init:function(){document.querySelectorAll('a[href^="#"]').forEach(function(t){t.addEventListener("click",function(t){t.preventDefault();const e=this.getAttribute("href").substring(1),n=document.getElementById(e);n&&n.scrollIntoView({behavior:"smooth",block:"start"})})})}},CardAnimations={init:function(){const t=document.querySelectorAll(".card");t.forEach(function(t,e){t.style.animationDelay=.1*e+"s"});const e=new IntersectionObserver(function(t){t.forEach(function(t){t.isIntersecting&&Utils.addClass(t.target,"animate")})});t.forEach(function(t){e.observe(t)})}},Notifications={show:function(t,e="info",n=3e3){const o=document.createElement("div");o.className="notification notification-"+e,o.innerHTML=`\n            <span class="notification-message">${t}</span>\n            <button class="notification-close">&times;</button>\n        `,document.body.appendChild(o),setTimeout(function(){Utils.addClass(o,"show")},100),setTimeout(function(){Notifications.hide(o)},n);o.querySelector(".notification-close").addEventListener("click",function(){Notifications.hide(o)})},hide:function(t){Utils.removeClass(t,"show"),setTimeout(function(){t.parentNode&&t.parentNode.removeChild(t)},300)}},ThemeSwitcher={init:function(){const t=document.querySelector(".theme-switcher");if(t){t.addEventListener("click",function(){ThemeSwitcher.toggleTheme()});const e=localStorage.getItem("theme");e&&document.body.setAttribute("data-theme",e)}},toggleTheme:function(){const t="dark"===document.body.getAttribute("data-theme")?"light":"dark";document.body.setAttribute("data-theme",t),localStorage.setItem("theme",t)}},Performance={init:function(){const t=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){const e=new IntersectionObserver(function(t){t.forEach(function(t){if(t.isIntersecting){const n=t.target;n.src=n.dataset.src,n.removeAttribute("data-src"),e.unobserve(n)}})});t.forEach(function(t){e.observe(t)})}Performance.preloadCriticalResources()},preloadCriticalResources:function(){["/css/app.min.css","/js/app.min.js"].forEach(function(t){const e=document.createElement("link");e.rel="preload",e.href=t,e.as=t.endsWith(".css")?"style":"script",document.head.appendChild(e)})}};ready(function(){MobileNav.init(),PointsCounter.init(),SortableTable.init(),ProgressBar.init(),TaskManager.init(),FormValidator.init(),SmoothScroll.init(),CardAnimations.init(),ThemeSwitcher.init(),Performance.init(),Utils.addClass(document.body,"loaded"),console.log("Laravel Template JS initialized successfully")}),window.LaravelTemplate={Utils:Utils,MobileNav:MobileNav,PointsCounter:PointsCounter,SortableTable:SortableTable,ProgressBar:ProgressBar,TaskManager:TaskManager,FormValidator:FormValidator,Notifications:Notifications,ThemeSwitcher:ThemeSwitcher,Performance:Performance};